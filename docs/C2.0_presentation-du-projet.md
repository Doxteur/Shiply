## Présentation du projet — Shiply (MVP)

### Vision
Shiply est une plateforme CI/CD auto‑hébergeable, simple, permettant de créer, exécuter et suivre des pipelines (build, tests, qualité, sécurité, déploiement) avec un runner Docker local et un gestionnaire de déploiement intégré (Shiply Deploy Manager).

### Objectifs
- Unifier la chaîne Dev → Prod pour des projets applicatifs conteneurisés.
- Offrir une UX claire pour piloter pipelines, runs et déploiements.

### Périmètre MVP
- CRUD projets/pipelines, synchronisation YAML depuis GitHub.
- Exécution des jobs en conteneurs Docker, logs SSE.
- Déploiement via Shiply Deploy Manager (drivers `compose`, `dockerfile`, `command`).
- Historique des runs, métriques de base (taux de succès, durée moyenne).
- Actions: Stop run, Déployer un run « success », suppression projet (cascade + workspace).

### Architecture (mono‑repo)
- `client`: React + Vite + TS + Tailwind + shadcn/ui (Redux Toolkit).
- `server`: AdonisJS (TS) + Lucid ORM + JWT  + `/metrics` Prometheus.
- `runner`: Bun + dockerode (exécute les steps, stream logs).
- `shared`: types TypeScript communs (contrats entre client/server/runner).
- Infra: Docker, MySQL, Grafana (dashboard métriques), `turbo` pour l’orchestration.

### Flux clés
- Synchronisation pipeline: GitHub → validation → création/MAJ pipeline `repository-sync`.
- Exécution: clone/MAJ workspace → steps dans conteneurs → logs SSE → statut agrégé.
- Déploiement: gate manuel → driver selon `project.config.runMode` → smoke test → publication d’URLs.

### Git & Qualité
- GitFlow, Conventional Commits, PR obligatoires vers `develop`/`main`.
- CI: typecheck, ESLint, tests (≥80% couvertures sur modules touchés), Trivy, LHCI.
- CD: tags SemVer sur `main`, changelog auto, déploiement progressif (staging → prod).

### Démos rapides
- Lancer en dev: `bun install` puis `bun run dev`.
- Lancement du runner: `DOCKER_HOST="tcp://localhost:2375" API_URL="http://localhost:3333" RUNNER_NAME="runner-local" bun run --cwd=runner dev`
- Créer projet → finaliser (repo, runMode, env vars) → sync pipeline → exécuter → suivre logs.
- Déployer un run « success » et vérifier le smoke test.

### Roadmap (post‑MVP)
- Artefacts (upload/téléchargement), Rollback.
- Drivers de déploiement étendus.
- Observabilité enrichie (métriques CI/CD, traces, alertes).

### Liens
- Règles projet et exigences C2.x: `docs/README.md`.
- Déploiement interne: `docs/shiply-deploy-manager.md`.

